(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=t(o);fetch(o.href,s)}})();const d=[];function u(n,e){d.push({reading:n,vibe:e,timestamp:new Date().toISOString()})}function i(n){const e=d[d.length-1];e.vibe=n,console.log(e)}function m(){const n=document.getElementById("responseContainer"),e=document.getElementById("titleContainer");n.textContent="",e.classList.add("hidden")}function p(n){const e=document.getElementById("responseContainer");document.getElementById("titleContainer"),console.log(d);const t=document.createElement("h2");t.textContent=n.name;const r=document.createElement("p");r.textContent=n.meaning_up;const o=document.createElement("div");o.appendChild(t),o.appendChild(r),e.appendChild(o),e.classList.add("responseContainer"),e.classList.remove("hidden"),f(),C()}function f(n){const e=document.getElementById("responseContainer");document.getElementById("titleContainer");const t=document.createElement("button");t.innerText="Try again",t.classList.add("button"),t.classList.add("button"),t.addEventListener("click",a),e.appendChild(t)}function C(n){const e=document.getElementById("responseContainer");document.getElementById("titleContainer");const t=document.createElement("div");t.id="buttonContainer",t.classList.add("divButtons");const r=document.createElement("button");r.innerText="Reflects my past",r.classList.add("vibeButtons"),r.id="PAST",r.addEventListener("click",()=>i("PAST"));const o=document.createElement("button");o.innerText="Reflects my present",o.classList.add("vibeButtons"),o.id="PRESENT",o.addEventListener("click",()=>i("PRESENT"));const s=document.createElement("button");s.innerText="Reflects my future",s.classList.add("vibeButtons"),s.id="FUTURE",s.addEventListener("click",()=>i("FUTURE")),t.appendChild(r),t.appendChild(o),t.appendChild(s),e.appendChild(t)}async function E(){try{const e=await(await fetch("https://tarotapi.dev/api/v1/cards/random?n=1")).json(),t=e.cards[0];console.log("test"),console.log(e),m(),p(t),u({type:"tarot",card:t})}catch(n){console.error("Error. No card found:",n)}}const h="7d790f2612fc40b5a77100819251807",g=41.3851,y=2.1734,L="Barcelona";function v(n){return new Promise((e,t)=>{navigator.geolocation.getCurrentPosition(e,t,n)})}async function b(){try{const n=await v();return{latitude:n.coords.latitude,longitude:n.coords.longitude}}catch{return{latitude:g,longitude:y,city:L}}}const B={method:"GET",headers:{Accept:"application/json"}};async function T(n,e){const t="https://api.weatherapi.com/v1/current.json",r=`${n},${e}`,o=`${t}?key=${h}&q=${r}`;try{const s=await fetch(o,B);if(!s.ok)throw new Error(`HTTP error: ${s.status}`);const c=await s.json();return console.log("the weather is...",c),c}catch(s){console.error("Error getting the weather",s)}}function R(n){const e=document.getElementById("weatherLocation"),t=document.getElementById("weatherTemperature"),r=document.getElementById("weatherCondition");if(e&&(e.textContent=n.location.name),t&&(t.textContent=`${n.current.temp_c}Â°C`),r){const o=`https:${n.current.condition.icon}`;r.innerHTML=`
      <img src="${o}" alt="${n.current.condition.text}" style="width: 24px; vertical-align: middle;"/>
      `}}function I(){const n=document.getElementById("responseContainer"),e=document.getElementById("titleContainer");n.textContent="",e.classList.add("hidden")}function w(n){const e=document.getElementById("responseContainer");document.getElementById("titleContainer");const t=document.createElement("h2");t.textContent="Your cookie fortune:";const r=document.createElement("p");r.textContent=n.fortune;const o=document.createElement("div");o.appendChild(t),o.appendChild(r),e.appendChild(o),e.classList.add("responseContainer"),e.classList.remove("hidden"),P(),x()}function P(n){const e=document.getElementById("responseContainer");document.getElementById("titleContainer");const t=document.createElement("button");t.innerText="Try again",t.classList.add("button"),t.classList.add("button"),t.addEventListener("click",a),e.appendChild(t)}function x(n){const e=document.getElementById("responseContainer");document.getElementById("titleContainer");const t=document.createElement("div");t.id="buttonContainer",t.classList.add("divButtons");const r=document.createElement("button");r.innerText="Reflects my past",r.classList.add("vibeButtons"),r.id="PAST",r.addEventListener("click",()=>i("PAST"));const o=document.createElement("button");o.innerText="Reflects my present",o.classList.add("vibeButtons"),o.id="PRESENT",o.addEventListener("click",()=>i("PRESENT"));const s=document.createElement("button");s.innerText="Reflects my future",s.classList.add("vibeButtons"),s.id="FUTURE",s.addEventListener("click",()=>i("FUTURE")),t.appendChild(r),t.appendChild(o),t.appendChild(s),e.appendChild(t)}const l="1a6866fb-9b59-4495-befa-d22c89093b2e",$={method:"GET",headers:{Accept:"application/json",Authorization:l}};async function k(){const e=`https://api.erensko.xyz/v1/random-fortune?${l}=&=`;try{const t=await fetch(e,$);if(!t.ok)throw new Error(`HTTP error: ${t.status}`);const r=await t.json();return console.log("test"),console.log(r.fortune),I(),w(r),u({type:"cookie",fortune:r.fortune}),r}catch(t){console.error("Error getting the weather",t)}}document.addEventListener("DOMContentLoaded",async()=>{const n=await b(),e=await T(n.latitude,n.longitude);e&&R(e)});document.addEventListener("DOMContentLoaded",()=>{document.querySelector("#getCard").addEventListener("click",a)});function a(){const n=Math.random()<.2;try{n?k():E()}catch(e){console.error(e)}}
